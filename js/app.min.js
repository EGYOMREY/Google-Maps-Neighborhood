                /*jshint loopfunc: true */function initMap(){map=new google.maps.Map(document.getElementById("map"),{center:myLatLng,zoom:16,styles:[{elementType:"geometry",stylers:[{color:"#f5f5f5"}]},{elementType:"labels.icon",stylers:[{visibility:"off"}]},{elementType:"labels.text.fill",stylers:[{color:"#616161"}]},{elementType:"labels.text.stroke",stylers:[{color:"#f5f5f5"}]},{featureType:"administrative.land_parcel",elementType:"labels.text.fill",stylers:[{color:"#bdbdbd"}]},{featureType:"landscape.man_made",elementType:"geometry.fill",stylers:[{color:"#aaaaaa"}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#eeeeee"}]},{featureType:"poi",elementType:"labels.text.fill",stylers:[{color:"#757575"}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#e5e5e5"}]},{featureType:"poi.park",elementType:"labels.text.fill",stylers:[{color:"#9e9e9e"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#ffffff"}]},{featureType:"road.arterial",elementType:"geometry.fill",stylers:[{color:"#fe0e14"}]},{featureType:"road.arterial",elementType:"labels.text.fill",stylers:[{color:"#757575"}]},{featureType:"road.arterial",elementType:"labels.text.stroke",stylers:[{color:"#000000"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#dadada"}]},{featureType:"road.highway",elementType:"geometry.fill",stylers:[{color:"#920104"}]},{featureType:"road.highway",elementType:"labels.text.fill",stylers:[{color:"#616161"}]},{featureType:"road.highway",elementType:"labels.text.stroke",stylers:[{color:"#000000"}]},{featureType:"road.local",elementType:"geometry.fill",stylers:[{color:"#ffb7b9"}]},{featureType:"road.local",elementType:"labels.text.fill",stylers:[{color:"#9e9e9e"}]},{featureType:"road.local",elementType:"labels.text.stroke",stylers:[{color:"#000000"}]},{featureType:"transit.line",elementType:"geometry",stylers:[{color:"#e5e5e5"}]},{featureType:"transit.station",elementType:"geometry",stylers:[{color:"#eeeeee"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#c9c9c9"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#9e9e9e"}]}]}),window.onresize=function(){map.fitBounds(bounds)},ko.applyBindings(new viewModel.displayMarkers)}var mapNotLoad=function(){alert("Error while loading your Map")},myLatLng={lat:48.209665,lng:16.3673238},bounds,i,marker,map,largeInfowindow,loadData,markers=[],viewModel={places:ko.observableArray([]),search:ko.observable(""),displayMarkers:function(){largeInfowindow=new google.maps.InfoWindow,bounds=new google.maps.LatLngBounds;for(var e=0;e<locations.length;e++){var o=locations[e].location,t=locations[e].title,l=(locations[e].id,locations[e].info);marker=new google.maps.Marker({position:o,map:map,title:t,info:l,icon:"images/top.png",animation:google.maps.Animation.DROP,id:e}),markers.push(marker),bounds.extend(marker.position),marker.addListener("click",function(){viewModel.populateInfoWindow(this,largeInfowindow),loadData(this)}),bounds.extend(markers[e].position)}map.fitBounds(bounds)},clickMarker:function(e){for(var o=0;o<markers.length;o++)markers[o].id==e.id&&(viewModel.populateInfoWindow(markers[o],largeInfowindow),loadData())},populateInfoWindow:function(e,o){o.marker!=e&&(o.marker=e,o.setContent("<div>"+e.title+"</div><br><div>"+e.info+"</div>"),o.open(map,e),o.addListener("closeclick",function(){o.setMarker=null}),loadData=function(){viewModel.wikiResponse([]);var o="https://en.wikipedia.org/w/api.php?action=opensearch&search="+e.title+"&format=json&callback=wikiCallback";$.ajax({url:o,dataType:"jsonp",jsonp:"callback"}).done(function(e){for(var o={},t=e[1],l=0;l<1;l++){var a=t[l];o.title=a,o.link="http://en.wikipedia.org/wiki/"+a,viewModel.wikiResponse.push(o)}}).fail(function(e,o){var t=o;console.log("Request Failed: "+t),alert("No Wiki resources available")})}),map.fitBounds(bounds),null!==e.getAnimation()?e.setAnimation(null):e.setAnimation(google.maps.Animation.BOUNCE),setTimeout(function(){e.setAnimation(null)},700),o.open(map,e),map.addListener("click",function(){o.close(o)})},filterMarkers:function(){for(i=0;i<markers.length;i++){markers[i].setVisible(!1);for(var e=0;e<viewModel.filteredItems().length;e++)markers[i].id==viewModel.filteredItems()[e].id&&markers[i].setVisible(!0)}}};viewModel.places=ko.observableArray(locations),viewModel.wikiResponse=ko.observableArray([]),viewModel.filteredItems=ko.computed(function(){var e=this.search().toLowerCase();return e?ko.utils.arrayFilter(this.places(),function(o){return o.title.toLowerCase().indexOf(e)>=0}):this.places()},viewModel);
